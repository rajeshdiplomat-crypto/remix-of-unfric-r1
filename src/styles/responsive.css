/* ========================================
   RESPONSIVE DESIGN SYSTEM
   Global responsive rules for typography,
   spacing, touch targets, and layout
   ======================================== */

/* ---- Group 3: Fluid Typography ---- */

/* Antialiased rendering for sharp text on all screens */
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Fluid headings — semibold weight + tight tracking for premium feel */
h1 {
  font-size: clamp(1.8rem, 5vw, 3rem);
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.2;
}

h2 {
  font-size: clamp(1.35rem, 3.5vw, 2rem);
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.3;
}

h3 {
  font-size: clamp(1.1rem, 2.5vw, 1.5rem);
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.4;
}

/* ---- Mobile Typography Refinements ---- */
@media (max-width: 767px) {
  body {
    font-size: 14px;
  }

  /* Body text: 14px / medium weight / relaxed line-height */
  p, span, li, td, th {
    font-size: 0.875rem; /* 14px */
    line-height: 1.6; /* leading-relaxed */
    font-weight: 500; /* font-medium */
  }

  /* Description blocks: sentence case, never uppercase */
  p, .description-text, .long-form-text {
    text-transform: none !important;
    letter-spacing: normal;
  }

  /* Ensure labels, task names, diary dates never shrink below 13px */
  label,
  .text-sm,
  .text-xs {
    font-size: max(var(--tw-text-size, 0.75rem), 0.8125rem); /* 13px min */
  }

  /* Metadata labels only: 10px, normal weight, uppercase */
  .zara-label {
    font-size: 0.625rem; /* 10px */
    font-weight: 400;
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }

  /* Logo scales up on mobile — prominent anchor */
  .unfric-logo-scale {
    font-size: 110%;
  }

  /* Card minimum padding on mobile */
  .ui-card,
  [data-slot="card"],
  .card {
    padding: 1.25rem; /* p-5 minimum */
  }

  /* Tighten vertical spacing by ~30% on mobile */
  .space-y-6 > * + * { margin-top: 1rem; }
  .space-y-4 > * + * { margin-top: 0.625rem; }
  .my-6 { margin-top: 1rem; margin-bottom: 1rem; }
  .my-4 { margin-top: 0.625rem; margin-bottom: 0.625rem; }
  .mb-6 { margin-bottom: 1rem; }
  .mb-4 { margin-bottom: 0.625rem; }
  .py-4 { padding-top: 0.625rem; padding-bottom: 0.625rem; }

  /* Mandatory visual air between feed cards */
  .feed-card + .feed-card,
  .diary-card + .diary-card {
    margin-top: 2rem; /* gap-y-8 equivalent */
  }
}

/* ---- Group 3: Line Spacing for long-form content ---- */
/* Journal and Diary text comfortable reading */
.journal-content,
.diary-content,
.long-form-text {
  line-height: 1.6;
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
}

/* ---- Group 4: Thumb-Friendly Buttons ---- */
/* Touch-optimized buttons: 48px mobile, 56px desktop */
button[data-primary],
.btn-primary,
[data-slot="button"] {
  min-height: 48px;
}

@media (min-width: 768px) {
  button[data-primary],
  .btn-primary,
  [data-slot="button"] {
    min-height: 56px;
  }
}

/* ---- Tablet Touch Target & Hover Parity (768px–1024px) ---- */
/* Ensure 44px minimum touch targets on tablet-sized touch screens */
@media (min-width: 768px) and (pointer: coarse) {
  /* All interactive icon buttons get 44px minimum */
  button,
  [role="button"],
  a {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exception: inline text links and chip/pill buttons */
  a:not([role="button"]),
  [data-slot="chip"],
  button[data-size="chip"] {
    min-height: unset;
    min-width: unset;
  }

  /* Make hover-only actions always visible on touch devices */
  .group-hover\:opacity-100,
  .hover\:opacity-100,
  [class*="group-hover:visible"],
  [class*="hover:visible"] {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Ensure dropdown triggers are finger-friendly */
  [data-radix-collection-item] {
    min-height: 44px;
  }
}

/* ---- Sticky Save Buttons Above Virtual Keyboard ---- */
/* When the visual viewport shrinks (keyboard open), keep save buttons visible */
@supports (height: 1dvh) {
  .sticky-save-bar {
    position: sticky;
    bottom: 0;
    z-index: 50;
    padding-bottom: env(safe-area-inset-bottom, 0px);
    backdrop-filter: blur(12px);
    background: hsl(var(--card) / 0.95);
    border-top: 1px solid hsl(var(--border));
  }
}

/* ---- Group 4: Input Focus Scaling — prevent iOS zoom ---- */
/* Set all inputs to 16px minimum to prevent iOS auto-zoom */
input,
select,
textarea {
  font-size: max(1rem, 16px);
}

@media (min-width: 768px) {
  input,
  select,
  textarea {
    font-size: inherit;
  }
}

/* ---- Group 2: Max-Width Controls ---- */
/* Main content container max-width for readability on large screens */
.content-container {
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
}

/* ---- Group 1: Hero images responsive ---- */
/* Ensure hero images use object-cover with centered focal point */
.page-hero-media {
  object-fit: cover;
  object-position: center;
}

@media (max-width: 767px) {
  .page-hero-media {
    aspect-ratio: 16 / 9;
  }
}

/* ---- PWA: Safe Area Insets ---- */
/* Respect notches, home indicators, and rounded corners on modern devices */
html {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
}

/* ---- PWA: Disable Pull-to-Refresh ---- */
/* Prevent accidental browser pull-to-refresh in standalone mode */
body {
  overscroll-behavior-y: contain;
}

@media all and (display-mode: standalone) {
  html, body {
    overscroll-behavior: none;
  }
}
